command: ['python', 'backend/src/app.py']

env:
  - name: "PYTHONPATH"
    value: "./backend:${PYTHONPATH}"
  - name: "PYTHONUNBUFFERED"
    value: "1"
  - name: "FRONTEND_STATIC_DIR"
    value: "./static"
  - name: "POSTGRES_HOST"
    value: "instance-4e8da72e-cd0e-4553-8888-d10d709ac735.database.cloud.databricks.com"
  - name: "POSTGRES_PORT"
    value: "5432"
  - name: "POSTGRES_USER"
    value: "ontos_app_user"
  - name: "POSTGRES_PASSWORD"
    valueFrom: "db_password"
  - name: "POSTGRES_PASSWORD_SECRET"
    value: "ontos/db_password"
  - name: "POSTGRES_DB"
    value: "app_ontos"
  - name: "POSTGRES_DB_SCHEMA"
    value: "app_ontos"

  - name: "DATABRICKS_WAREHOUSE_ID"
    valueFrom: "sql_warehouse"
  - name: "DATABRICKS_CATALOG"
    value: "app_data"
  - name: "DATABRICKS_SCHEMA"
    value: "app_ontos"
  - name: "DATABRICKS_VOLUME"
    value: "app_files"

  - name: "APP_DEMO_MODE"
    value: "true"
  - name: "APP_DB_DROP_ON_START"
    value: "true"

  - name: "APP_ADMIN_DEFAULT_GROUPS"
    value: '["admins"]'
  - name: "APP_AUDIT_LOG_DIR"
    value: "audit_logs"
    #value: "/Volumes/${workspace.env.DATABRICKS_CATALOG}/${workspace.env.DATABRICKS_SCHEMA}/${workspace.env.DATABRICKS_VOLUME}/audit_logs"
  
  - name: "LLM_ENDPOINT"
    valueFrom: "serving_endpoint"
